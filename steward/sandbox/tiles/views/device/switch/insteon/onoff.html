<li data-w="1" data-h="1" data-x="{{x}}" data-y="{{y}}" class="status {{status}} z-depth-3" id="device-{{id}}">
	<div class="device waves-effect waves-light">
		<div class="name">{{name}}</div>
		<div class="icon"><span><i class="fa fa-lightbulb-o" aria-hidden="true"></span></i>
		</div>
	</div>

	<script>
		(function() {
			var current_data = {};
			update_functions['update_{{id}}'] = function(data) {
				if(!!data.status) {
					current_data = data;
					if(data.status === 'on') {
						$('#device-{{id}}').removeClass('off').addClass('on');	
					} else if(data.status === 'off') {
						$('#device-{{id}}').removeClass('on').addClass('off');	
					}
				}
			}
			$('#device-{{id}}').on('click', function() {
				if(current_data.status === 'on') {
					api.perform('{{id}}', 'off');
				} else if(current_data.status === 'off') {
					api.perform('{{id}}', 'on');
				}
				return false;
			});
		})();
  </script>
</li>
