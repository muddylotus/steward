<li data-w="1" data-h="1" data-x="{{x}}" data-y="{{y}}" class="status {{status}} z-depth-3" id="device-{{id}}">
	<div class="device waves-effect waves-light">
		<div class="name">{{name}}</div>
		<div class="icon"><span><i class="fa fa-check-square-o" aria-hidden="true"></i></span>
		</div>
	</div>

  <script>
		(function() {
			var current_class = '{{status}}';
			update_functions['update_{{id}}'] = function(status, info) {
				if(!!status) {
					$('#device-{{id}}').removeClass(current_class).addClass(status);
					current_class = status;
				}
			}
			$('#device-{{id}}').on('click', function() {
				api.perform('{{id}}', 'toggle');
			});
			$('.modal').modal();
			$('#device-{{id}}').on('taphold', function() {
				$('#settings-{{id}}').modal('open');
				Materialize.updateTextFields();
			});
		})();
  </script>

	<div id="settings-{{id}}" class="modal">
    <div class="modal-content">
      <h4>Settings</h4>

			<form>
				<div class="row">
					<div class="col s8">
						<div class="input-field">
							<input id="name" type="text" class="validate" value="{{name}}">
							<label for="name">Name</label>
						</div>
					</div>
					<div class="col s4">
						<a href="#!" class="btn waves-effect waves-light">Save</a>
					</div>
				</div>
			</form>

    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn">Agree</a>
    </div>
  </div>
</li>
